<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Notes with localStorage</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: 40px auto; padding: 0 16px; }
    textarea { width: 100%; height: 240px; padding: 10px; box-sizing: border-box; font-size: 16px; }
    .controls { margin-top: 12px; display: flex; gap: 8px; flex-wrap: wrap; }
    button { padding: 8px 12px; font-size: 14px; cursor: pointer; }
    #message { margin-top: 10px; color: #2b7a2b; }
    #error { margin-top: 10px; color: #b22; }
  </style>
</head>
<body>

  <h1>My Notes</h1>

  <!-- textarea where user types notes -->
  <textarea id="notesTextarea" placeholder="Type your notes here..."></textarea>

  <!-- buttons -->
  <div class="controls">
    <button id="saveBtn">Save Notes</button>
    <button id="loadBtn">Load Notes</button>
    <button id="clearBtn">Clear Notes</button>
  </div>

  <!-- small status messages -->
  <div id="message" aria-live="polite"></div>
  <div id="error" aria-live="assertive"></div>

<script>
  // Key used for storing notes in localStorage
  const STORAGE_KEY = "savedNotes";

  // Grab DOM elements
  const textarea = document.getElementById("notesTextarea");
  const saveBtn = document.getElementById("saveBtn");
  const loadBtn = document.getElementById("loadBtn");
  const clearBtn = document.getElementById("clearBtn");
  const messageDiv = document.getElementById("message");
  const errorDiv = document.getElementById("error");

  // Utility: show success message for a short time
  function showMessage(text) {
    messageDiv.textContent = text;
    errorDiv.textContent = "";
    setTimeout(() => { messageDiv.textContent = ""; }, 2500);
  }

  // Utility: show error message
  function showError(text) {
    errorDiv.textContent = text;
    messageDiv.textContent = "";
  }

  // Save notes to localStorage (with validation)
  function saveNotes() {
    const text = textarea.value;
    if (!text || text.trim().length === 0) {
      showError("Cannot save empty notes. Please type something first.");
      return;
    }

    try {
      localStorage.setItem(STORAGE_KEY, text);
      showMessage("Notes saved successfully.");
    } catch (err) {
      showError("Failed to save notes (storage error).");
      console.error("localStorage.setItem error:", err);
    }
  }

  // Load notes from localStorage into the textarea
  function loadNotes() {
    try {
      const stored = localStorage.getItem(STORAGE_KEY);
      if (stored !== null) {
        textarea.value = stored;
        showMessage("Notes loaded.");
      } else {
        textarea.value = "";
        showMessage("No saved notes found.");
      }
    } catch (err) {
      showError("Failed to load notes (storage error).");
      console.error("localStorage.getItem error:", err);
    }
  }

  // Clear notes from localStorage and textarea
  function clearNotes() {
    try {
      localStorage.removeItem(STORAGE_KEY);
      textarea.value = "";
      showMessage("Saved notes cleared.");
    } catch (err) {
      showError("Failed to clear notes (storage error).");
      console.error("localStorage.removeItem error:", err);
    }
  }

  // Attach button event listeners
  saveBtn.addEventListener("click", saveNotes);
  loadBtn.addEventListener("click", loadNotes);
  clearBtn.addEventListener("click", clearNotes);

  // On page load, automatically load any saved notes
  document.addEventListener("DOMContentLoaded", function () {
    loadNotes();
  });
</script>

</body>
</html>
